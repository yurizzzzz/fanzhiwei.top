<% if (is_home() && page.current === 1) { %>
<%- partial('_partial/index-cover') %>
<% } else { %>
    <%- partial('_partial/bg-cover') %>
<% } %>

<style>
    @media only screen and (max-width: 800px) {
        .swbk {
            padding: 26px 2px!important;
            margin: 0!important;
        }
        .swbk ol {
            padding: 2px 10px;
        }
    }
    .swbk {
        position: relative;
        padding: 26px 20px;
        font-style: italic;
        margin: 10px 100px;
        margin-bottom: 20px;
        -webkit-box-shadow: 0 14px 38px rgba(0,0,0,.08), 0 3px 8px rgba(0,0,0,.06);
        box-shadow: 0 14px 38px rgba(0,0,0,.08), 0 3px 8px rgba(0,0,0,.06);
        -webkit-transition: all .3s ease 0s,-webkit-transform .6s cubic-bezier(.6,.2,.1,1) 0s;
        transition: all .3s ease 0s,-webkit-transform .6s cubic-bezier(.6,.2,.1,1) 0s;
        transition: all .3s ease 0s,transform .6s cubic-bezier(.6,.2,.1,1) 0s;
        transition: all .3s ease 0s,transform .6s cubic-bezier(.6,.2,.1,1) 0s,-webkit-transform .6s cubic-bezier(.6,.2,.1,1) 0s;
    }
    .swbk:hover {
        -webkit-transform: translateY(-4px);
        transform: translateY(-4px);
        -webkit-box-shadow: 0 14px 38px rgba(0,0,0,.14), 0 3px 8px rgba(0,0,0,.12);
        box-shadow: 0 14px 38px rgba(0,0,0,.14), 0 3px 8px rgba(0,0,0,.12);
    }
    .swbk:before {
        content: " â€œ ";
        top: 56px;
        left: -14px;
    }
    .swbk:after {
        content: " â€ ";
        bottom: 8px;
        right: 5px;
    }
    .swbk:after, .swbk:before {
        position: absolute;
        font-style: normal;
        font-weight: 600;
        font-size: 42px;
        text-decoration: inherit;
    }
    .ziwojieshao .swbk:after, .ziwojieshao .swbk:before {
        display: none;
    }
    body.dark .swbk:after, body.dark .swbk:before {
        color: #d2c9c9;
    }
    .swbk p {
        font-size: 19px!important;
        line-height: 2.4rem;
        text-indent: 2rem;
        /* font-style: italic;
        font-family: 'Architects Daughter', cursive!important; */
    }
    .swbk .label {
        display: inline-block;
        position: relative;
        margin-bottom: 10px;
        padding: 0 14px 0 32px;
        height: 32px;
        line-height: 32px;
        border-radius: 0 3px 3px 0;
        background-color: currentColor;
    }
    .swbk .label span {
        color: #fff;
    }
    .swbk .label:after {
        content: "";
        position: absolute;
        top: 100%;
        left: 0;
        width: 0;
        height: 0;
        background-color: transparent;
        border-style: solid;
        border-width: 0 16px 16px 0;
        border-color: transparent;
        border-right-color: currentColor;
        -webkit-filter: brightness(120%);
        filter: brightness(120%);
    }
    @media screen and (min-width: 700px) {
        .swbk .label {
            left: -37px;
        }
    }
    @media screen and (max-width: 767px) {
        .swbk .label {
            left: -18px;
        }
        .swbk p {
            padding: 2px 8px;
        }
    }
</style>

<main class="content">

    <% if (page.current === 1
            && ((theme.dream.enable || theme.music.enable)
                    || theme.video.enable || theme.recommend.enable)) { %>
    <div id="indexCard" class="index-card">
        <div class="container ">
            <div class="card">
                <div class="card-content">
                    <% if (theme.dream.enable) { %>
                        <%- partial('_widget/dream') %>
                    <% } %>

                    <% if (theme.music.enable && !theme.music.fixed) { %>
                        <%- partial('_widget/music') %>
                        <% } %>

                    <% if (theme.video.enable && ( theme.video.url || theme.video.iframeUrl ) ) { %>
                        <%- partial('_widget/video') %>
                    <% } %>

                    <% if (theme.recommend.enable) { %>
                    <div id="recommend-sections" class="recommend">
                        <div class="ziwojieshao">
                            <div class="swbk">
                                <div class="label" style="color: rgb(19, 170, 39);">
                                    <span>å¾ˆå–œæ¬¢è¿™æ ·ä¸€å¥è¯</span>
                                </div>
                                <p align="center">
                                    ã€Šäº•ç¦»ã€‹
                                </p>
                                <p align="center">
                                    ğŸ’æ•…äº‹çš„å¼€å¤´æå…·æ¸©æŸ”ï¼Œä½†ç»“å±€å´é…ä¸ä¸Šæ•´ä¸ªå¼€å¤´å•Šï¼ç¡®å®å•Šï¼Œäººç”Ÿè‹¥åªå¦‚åˆè§ï¼Œä½•äº‹ç§‹é£æ‚²ç”»æ‰‡ã€‚åˆšå¼€å§‹çš„ç›¸é‡ç›¸çŸ¥ç›¸è®¸
                                    éƒ½æ˜¯ç¾å¥½çš„ï¼Œå°±åƒä¸€ç¯‡å¥½çš„æ–‡ç« ä¸€æ®µå¥½çš„å¼€å¤´ï¼Œå¯æ˜¯åˆ†å¼€äº†å‘¢ï¼Œå´è®©æ•…äº‹ç”»ä¸Šäº†å¥å·ï¼Œäººå’Œäººåˆšå¼€å§‹è®¤è¯†çš„æ—¶å€™éƒ½æ˜¯æœ€å¥½çš„ã€‚
                                </p>
                            </div>
                        </div>
                        <div class="ziwojieshao">
                            <div class="swbk">
                                <div class="label" style="color: rgb(214, 91, 111);">
                                    <span>åŠªåŠ›</span>
                                </div>
                                <p align="center">
                                    ã€Šäººæ°‘æ—¥æŠ¥ã€‹
                                </p>
                                <p align="center">
                                    ğŸ‰æ¯”ä½ ä¼˜ç§€çš„äººè¿˜æ¯”ä½ åŠªåŠ›ï¼Œè¿™ä¸æ˜¯å†…å·å’Œæ¶ˆè€—ï¼Œè€Œæ˜¯æé†’å’Œç ¥ç ºï¼Œé€‰æ‹©å†³å®šæœªæ¥ï¼Œç”¨å¥‹æ–—å¡‘é€ è‡ªæˆ‘ï¼Œäººç”Ÿå°†æ›´å¼€é˜”ï¼
                                </p>
                            </div>
                        </div>
                        <div class="ziwojieshao">
                            <div class="swbk">
                                <div class="label" style="color: rgb(30, 19, 129);">
                                    <span>æ—¶é—´</span>
                                </div>
                                <p align="center">
                                    ã€Šæ— åã€‹
                                </p>
                                <p align="center">
                                    ğŸåå¹´å¯è§æ˜¥å»ç§‹æ¥ï¼Œç™¾å¹´å¯è§ç”Ÿè€ç—…æ­»ï¼Œåƒå¹´å¯è§ç‹æœæ›´æ›¿ï¼Œä¸‡å¹´å¯è§æ–—è½¬æ˜Ÿç§»ã€‚
                                </p>
                            </div>
                        </div>

                        <%- partial('_widget/recommend') %>
                    </div>
                    <% } %>
                </div>
            </div>
        </div>
    </div>
    <% }%>

    <%
    var hashCode = function (str) {
        if (!str && str.length === 0) {
            return 0;
        }

        var hash = 0;
        for (var i = 0, len = str.length; i < len; i++) {
            hash = ((hash << 5) - hash) + str.charCodeAt(i);
            hash |= 0;
        }
        return hash;
    };
    %>

    <!-- æ‰€æœ‰æ–‡ç« å¡ç‰‡ -->
    <article id="articles" class="container articles">
        <div class="row article-row">
            <% page.posts.forEach(post => { %>
            <div class="article col s12 m6 l4" data-aos="zoom-in">
                <div class="card">
                    <a href="<%- url_for(post.path) %>">
                        <div class="card-image card-image-V">

                            <div class="box-content">
                                <h3 class="title">é˜…è¯»å…¨æ–‡</h3>
                                <!-- <span class="post" style="width: 50px"><%= post.title %></span> -->
                            </div>

                            <% if (post.img) { %>
                            <img src="<%- url_for(post.img) %>" class="responsive-img" alt="<%= post.title %>">
                            <% } else { %>
                            <%
                                var featureimg = '/medias/featureimages/0.jpg';
                                var featureImages = theme.featureImages;
                                if (!featureImages || featureImages.length == 0) {
                                    return featureimg;
                                }
                                featureimg = featureImages[Math.abs(hashCode(post.title) % featureImages.length)]
                            %>
                            <img src="<%- theme.jsDelivr.url %><%- url_for(featureimg) %>" class="responsive-img" alt="<%= post.title %>">
                            <% } %>
                            <span class="card-title"><%= post.title %></span>
                        </div>
                    </a>

                    <div class="card-content article-content">
                        <div class="summary block-with-text">
                            <% if (post.summary && post.summary.length > 0) { %>
                                <%- post.summary %>
                            <% } else if (post.excerpt && post.excerpt.length > 0) { %>
                                <%- strip_html(post.excerpt).substring(0, 120) %>
                            <% } else if (post.content && post.content.length > 0) { %>
                                <%- strip_html(post.content).substring(0, 120) %>
                            <% } %>
                        </div>
                        <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i><%= date(post.date, config.date_format) %>
                            </span>
                            <span class="publish-author">
                                <% if (post.categories && post.categories.length > 0) { %>
                                <i class="fas fa-bookmark fa-fw icon-category"></i>
                                <% post.categories.forEach(category => { %>
                                <a href="<%- url_for(category.path) %>" class="post-category">
                                    <%- category.name %>
                                </a>
                                <% }); %>
                                <% } else if (post.author && post.author.length > 0) { %>
                                <i class="fas fa-user fa-fw"></i>
                                <%- post.author %>
                                <% } else { %>
                                <i class="fas fa-user fa-fw"></i>
                                <%- config.author %>
                                <% } %>
                            </span>
                        </div>
                    </div>

                    <% if(post.tags && post.tags.length > 0) { %>
                    <div class="card-action article-tags">
                        <% post.tags.forEach(tag => { %>
                        <a href="<%- url_for(tag.path) %>">
                            <span class="chip bg-color"><%= tag.name %></span>
                        </a>
                        <% }); %>
                    </div>
                    <% } %>
                </div>
            </div>
            <% }); %>
        </div>
    </article>

</main>

<% if (page.total > 1) { %>
<%- partial('_partial/paging') %>
<% } %>
